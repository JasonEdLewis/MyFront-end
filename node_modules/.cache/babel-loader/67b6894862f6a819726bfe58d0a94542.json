{"ast":null,"code":"var _jsxFileName = \"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/HomeContainer.js\";\nimport React from \"react\";\nimport { match } from 'react';\nimport \"./css/HomeContainer.css\";\nimport Postcard from \"./components/PostCard\";\nimport NewPostCard from \"./components/NewPostCard\";\nimport Follows from './components/Follows';\nimport { getFollows, createFollow, deleteFollow } from './redux/actions/FollowActions';\nimport { connect } from 'react-redux';\nimport { getPost, editCaption } from './redux/actions/PostActions';\nimport { fetchUser, fetchAllUsers } from './redux/actions/UserActions';\nimport { addComment, deleteComment } from './redux/actions/CommentsActions';\nimport { changeLike } from './redux/actions/PostActions';\nimport { logout, notRequesting } from './redux/actions/LoginActions';\nimport ProfileCard from './components/ProfilePostCard';\nimport Loader from './components/loader';\nimport Bio from './components/UserBio';\n\nclass HomeContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showCommentField: false,\n      comment: \"\",\n      post_id: \"\",\n      Picture: \"\",\n      caption: \"\",\n      likes: 0,\n      page: \"thePost\",\n      likedPosts: [],\n      postRecieveingComment: null,\n      requesting: false,\n      showingUserId: null,\n      showingOne: false,\n      showOneBio: false,\n      postToDelete: 0\n    };\n\n    this.submitComment = postId => {\n      const _this$props = this.props,\n            userid = _this$props.userid,\n            addComment = _this$props.addComment,\n            user = _this$props.user,\n            requestedPost = _this$props.requestedPost;\n      const userId = this.state.userId;\n      const body = {\n        post_id: postId,\n        content: this.state.comment,\n        followee_id: userid\n      };\n      addComment(body);\n      debugger;\n      this.resetCommentLength();\n    };\n\n    this.postToCommentOn = id => {\n      this.setState({\n        postRecieveingComment: id\n      });\n    };\n\n    this.resetCommentLength = () => {\n      this.setState({\n        comment: \"\",\n        postRecieveingComment: null\n      });\n    };\n\n    this.handleComment = e => {\n      // console.log(e.target.value);\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.deleteComment = com => {\n      const deleteComment = this.props.deleteComment; // console.log(com.id, com.post_id, com.followee_id, com.content)\n\n      deleteComment(com.id, com.post_id, com.followee_id, com.content);\n    };\n\n    this.getCapField = () => {\n      this.setState({\n        editingCaption: !this.state.editingCaption\n      });\n    };\n\n    this.handleEditSubmit = id => {\n      this.props.editCaption(id, this.state.comment);\n      this.setState({\n        comment: \"\"\n      });\n      this.getCapField();\n    };\n\n    this.showCommentField = () => {\n      return this.setState({\n        showCommentField: !this.state.showCommentField\n      });\n    };\n\n    this.handleLikes = (id, likes) => {\n      const likedPosts = this.state.likedPosts;\n\n      if (likedPosts.includes(id)) {\n        this.deleteLike(id, likes);\n        const likesArr = likedPosts.filter(pId => pId !== id);\n        this.setState({\n          likedPosts: likesArr\n        });\n      } else {\n        this.addLike(id, likes);\n        const newLikes = [...likedPosts, id];\n        this.setState({\n          likedPosts: newLikes\n        });\n      }\n    };\n\n    this.addLike = (id, like) => {\n      // this.setState({ liked: !this.state.liked })\n      const numLikes = like + 1;\n      this.props.changeLike(id, numLikes, \"add\");\n    };\n\n    this.deleteLike = (id, like) => {\n      // this.setState({ liked: !this.state.liked })\n      const numLikes = like - 1;\n      this.props.changeLike(id, numLikes, \"\");\n    };\n\n    this.thePost = () => {\n      const _this$props2 = this.props,\n            posts = _this$props2.posts,\n            users = _this$props2.users,\n            history = _this$props2.history;\n      const _this$state = this.state,\n            comment = _this$state.comment,\n            showCommentField = _this$state.showCommentField,\n            editingCaption = _this$state.editingCaption,\n            likedPosts = _this$state.likedPosts,\n            postToCommentOn = _this$state.postToCommentOn,\n            postRecieveingComment = _this$state.postRecieveingComment;\n      return posts && posts.length > 0 ? posts.map(post => React.createElement(Postcard, {\n        users: users,\n        post: post,\n        history: history,\n        commentLen: comment.length,\n        toggleCommentField: this.showCommentField,\n        commentFieldStatus: showCommentField,\n        yourField: postRecieveingComment,\n        post2comment: this.postToCommentOn,\n        id: post.id,\n        resetComment: this.resetCommentLength,\n        submitComment: () => this.submitComment(post.id, post.userId),\n        handleComment: this.handleComment,\n        handleLikes: this.handleLikes,\n        getCapEditField: this.getCapField,\n        editCapStatus: editingCaption,\n        submitCapEdit: this.handleEditSubmit,\n        addLike: this.addLike,\n        disLike: this.deleteLike,\n        liked: likedPosts,\n        commentors: this.theUsers,\n        deleteComment: this.deleteComment,\n        showThisUser: this.startShowingOneUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })) : console.log(\"The Post didnt work, here are the props:\", this.props);\n    };\n\n    this.handleNewPostClick = () => {\n      this.setState({\n        newPost: !this.state.newPost\n      });\n    };\n\n    this.theNewPostCard = props => {\n      const userid = this.props.userid;\n      return React.createElement(NewPostCard, {\n        back: this.returnToThePost,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      });\n    };\n\n    this.myProfile = () => {\n      this.props.history.push('/profile');\n    };\n\n    this.returnToThePost = () => {\n      this.setState({\n        page: \"thePost\",\n        showingOne: false\n      });\n    };\n\n    this.handleNewPost = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.pageToRender = () => {\n      const showingUserId = this.state.showingUserId;\n\n      switch (this.state.page) {\n        case \"thePost\":\n          return this.thePost();\n\n        case \"newPost\":\n          return this.theNewPostCard();\n\n        case \"profile\":\n          return this.myProfile();\n\n        case \"show one\":\n          return this.showOneUser(showingUserId);\n      }\n    };\n\n    this.startShowingOneUser = id => {\n      this.setState({\n        showingUserId: id,\n        page: \"show one\",\n        showingOne: !this.state.showing\n      });\n    };\n\n    this.showOneUser = id => {\n      const _this$props3 = this.props,\n            users = _this$props3.users,\n            posts = _this$props3.posts,\n            name = _this$props3.name;\n      const theUser = users.find(user => user.id === id);\n      console.log(\"The one user stuff:\", theUser);\n      const userPost = posts.filter(post => post.user_id === theUser.id);\n      return this.showOneUsersPost(userPost);\n    };\n\n    this.showOneUsersPost = post => {\n      const _this$state2 = this.state,\n            likedPosts = _this$state2.likedPosts,\n            comment = _this$state2.comment;\n      const _this$props4 = this.props,\n            name = _this$props4.name,\n            users = _this$props4.users;\n      return post.map(p => React.createElement(ProfileCard, {\n        post: p,\n        user_id: p.user_id,\n        users: users,\n        name: name,\n        pic: p.pic,\n        id: p.id,\n        likedPosts: likedPosts,\n        comment: comment,\n        handleLike: this.handleLikes,\n        setId: this.setIdForPostToBeDeleted,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }));\n    };\n\n    this.showOneUserBio = () => {\n      const users = this.props.users;\n      const showingUserId = this.state.showingUserId;\n      const theUser = users.find(user => user.id === showingUserId);\n      return React.createElement(Bio, {\n        user: theUser.username,\n        pic: theUser.picture,\n        bio: theUser.bio,\n        city: theUser.city,\n        state: theUser.state,\n        home: this.returnToThePost,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      });\n    };\n\n    this.appLogout = () => {\n      const logout = this.props.logout;\n      logout();\n      localStorage.clear();\n      localStorage.length === 0 && this.returnToLogoutPage();\n    };\n\n    this.returnToLogoutPage = () => {\n      const _this$props5 = this.props,\n            requestedLogin = _this$props5.requestedLogin,\n            logout = _this$props5.logout;\n      logout();\n      this.props.history.push('/');\n    };\n\n    this.theUsers = () => {\n      const users = this.props.users;\n      const commentor = {};\n\n      if (!!users) {\n        this.props.users.forEach(user => commentor[user.id] = user.username);\n        return commentor;\n      }\n    };\n\n    this.followeeIds = () => {\n      // EVERYONE WHO IS FOLLOWED\n      const foll = this.props.follows.map(f => f.followee_id);\n      const followees = [...new Set(foll)]; // deletes/ filters duplicates out of arrays\n\n      return followees;\n    };\n\n    this.theFollow = (ErId, EeId) => {\n      return this.props.follows.find(f => f.follower_id === ErId && f.followee_id === EeId).id;\n    };\n\n    this.whoImFollowing = () => {\n      const _this$props6 = this.props,\n            follows = _this$props6.follows,\n            userid = _this$props6.userid,\n            users = _this$props6.users;\n      const peepsImFollowing = users.filter(u => follows.filter(f => f.follower_id === userid && f.followee_id === u.id));\n      return peepsImFollowing;\n    };\n\n    this.whoImNotFollowing = () => {\n      const _this$props7 = this.props,\n            follows = _this$props7.follows,\n            userid = _this$props7.userid,\n            users = _this$props7.users;\n      const peepsImFollowing = users.filter(u => follows.map(f => f.follower_id !== userid && f.followee_id === u.id));\n      return peepsImFollowing;\n    };\n\n    this.friends = () => {\n      const _this$props8 = this.props,\n            follows = _this$props8.follows,\n            userid = _this$props8.userid,\n            users = _this$props8.users,\n            deleteFollow = _this$props8.deleteFollow,\n            user = _this$props8.user;\n      const friendsArr = follows.filter(f => f.follower_id === userid).map(f => f.followee_id);\n      const theFriends = friendsArr.map(f => users.find(user => user.id === f));\n\n      if (theFriends.length > 0) {\n        return theFriends.map(f => React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326\n          },\n          __self: this\n        }, \" \", React.createElement(\"img\", {\n          src: f.picture,\n          className: \"friends-or-not-image\",\n          onClick: () => this.startShowingOneUser(f.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326\n          },\n          __self: this\n        }), \" \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"friends-or-not-name\",\n          id: f.id,\n          onClick: () => deleteFollow(this.theFollow(userid, f.id)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        }, `${f.username} ùö°`), \" \"));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"make-some-friends\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 330\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332\n          },\n          __self: this\n        }, `‚¨ÖÔ∏è Hey ${user}, Make Some ‚¨ÖÔ∏è New Friends!`, \" \"));\n      }\n    };\n\n    this.Suggestedfriends = () => {\n      const _this$props9 = this.props,\n            createFollow = _this$props9.createFollow,\n            userid = _this$props9.userid,\n            users = _this$props9.users,\n            follows = _this$props9.follows;\n      const allButMe = users.filter(user => user.id !== userid);\n      const nonfriendsArr = follows.filter(f => f.follower_id !== userid).map(f => f.followee_id);\n      const friendsArr = follows.filter(f => f.follower_id === userid).map(f => f.followee_id);\n      const usersSinFollowers = allButMe.filter(u => !this.followeeIds().includes(u.id));\n      const nonFollowers = allButMe.filter(u => nonfriendsArr.includes(u.id) && !friendsArr.includes(u.id));\n      const tempArr = [...nonFollowers, ...usersSinFollowers];\n      const whoImNotFollowing = [...new Set(tempArr)];\n      return whoImNotFollowing.map(f => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, \" \", React.createElement(\"img\", {\n        src: f.picture,\n        className: \"friends-or-not-image\",\n        onClick: () => {\n          this.startShowingOneUser(f.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"friends-or-not-name\",\n        onClick: () => createFollow(f.id, userid),\n        id: f.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, ` ${f.username} ‚úì`)));\n    };\n\n    this.setIdForPostToBeDeleted = id => {\n      this.setState({\n        postToDelete: id\n      });\n      this.showDelete_x();\n      console.log(this.state.postToDelete);\n    };\n\n    this.showDelete_x = () => {\n      this.setState({\n        show_x: !this.state.show_x\n      });\n    };\n  }\n\n  componentDidMount() {\n    const _this$props10 = this.props,\n          getPost = _this$props10.getPost,\n          fetchAllUsers = _this$props10.fetchAllUsers,\n          getFollows = _this$props10.getFollows;\n    getPost();\n    fetchAllUsers();\n    getFollows();\n    console.log(\"HOME CONTAINER\");\n    const history = this.props.history;\n    !localStorage.token && history.push('/');\n  } // COMMENTS //\n\n\n  render() {\n    // debugger\n    // console.log(\"Home Container props\", this.props);\n    const _this$props11 = this.props,\n          fposts = _this$props11.fposts,\n          user = _this$props11.user,\n          userId = _this$props11.userId,\n          history = _this$props11.history,\n          requestedLogin = _this$props11.requestedLogin,\n          picture = _this$props11.picture;\n    const _this$state3 = this.state,\n          showingOne = _this$state3.showingOne,\n          showingUserId = _this$state3.showingUserId;\n    this.theUsers();\n    this.followeeIds();\n    this.whoImFollowing();\n    return React.createElement(\"div\", {\n      className: \"Home-Container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(Follows, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }), React.createElement(\"nav\", {\n      className: \"Homepage-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      id: \"jays-gram\",\n      onClick: () => this.returnToThePost(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, this.props.user, \"s'taGram \"), React.createElement(\"p\", {\n      onClick: this.appLogout,\n      className: \"logout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \" logout  \")), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"camera\",\n      id: this.state.id,\n      onClick: () => this.setState({\n        page: \"newPost\"\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, \" \\uD83D\\uDCF8 \")), React.createElement(\"li\", {\n      className: \"thumbnail\",\n      onClick: () => this.setState({\n        page: \"profile\"\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: picture,\n      id: \"thumbnail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }), \" \"))), React.createElement(\"div\", {\n      className: !localStorage.token ? \"loading \" : \"Home-Content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sugested-friends\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, !showingOne ? React.createElement(\"span\", {\n      className: \"friends-and-suggested-headers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, \" Suggested\") : null, !showingOne ? this.Suggestedfriends() : this.showOneUserBio()), !showingOne ? React.createElement(\"div\", {\n      className: \"friends\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"friends-and-suggested-headers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, \"Friends\"), this.friends()) : null, this.pageToRender(), this.state.page !== \"newPost\" ? React.createElement(\"div\", {\n      className: \"Home-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }, \"Copyright \\xA9 2019 Jaystagram\") : React.createElement(React.Fragment, null)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.users.username,\n    userid: state.users.id,\n    picture: state.users.picture,\n    users: state.users.all,\n    posts: state.post.posts,\n    requestedPost: state.post.requested,\n    requestedLogin: state.login.requested,\n    follows: state.follows.follows,\n    name: state.users.usersObj\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getFollows,\n  getPost,\n  fetchAllUsers,\n  fetchUser,\n  addComment,\n  editCaption,\n  changeLike,\n  logout,\n  notRequesting,\n  deleteComment,\n  createFollow,\n  deleteFollow\n})(HomeContainer);","map":{"version":3,"sources":["/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/HomeContainer.js"],"names":["React","match","Postcard","NewPostCard","Follows","getFollows","createFollow","deleteFollow","connect","getPost","editCaption","fetchUser","fetchAllUsers","addComment","deleteComment","changeLike","logout","notRequesting","ProfileCard","Loader","Bio","HomeContainer","Component","state","showCommentField","comment","post_id","Picture","caption","likes","page","likedPosts","postRecieveingComment","requesting","showingUserId","showingOne","showOneBio","postToDelete","submitComment","postId","props","userid","user","requestedPost","userId","body","content","followee_id","resetCommentLength","postToCommentOn","id","setState","handleComment","e","target","name","value","com","getCapField","editingCaption","handleEditSubmit","handleLikes","includes","deleteLike","likesArr","filter","pId","addLike","newLikes","like","numLikes","thePost","posts","users","history","length","map","post","theUsers","startShowingOneUser","console","log","handleNewPostClick","newPost","theNewPostCard","returnToThePost","myProfile","push","handleNewPost","pageToRender","showOneUser","showing","theUser","find","userPost","user_id","showOneUsersPost","p","pic","setIdForPostToBeDeleted","showOneUserBio","username","picture","bio","city","appLogout","localStorage","clear","returnToLogoutPage","requestedLogin","commentor","forEach","followeeIds","foll","follows","f","followees","Set","theFollow","ErId","EeId","follower_id","whoImFollowing","peepsImFollowing","u","whoImNotFollowing","friends","friendsArr","theFriends","Suggestedfriends","allButMe","nonfriendsArr","usersSinFollowers","nonFollowers","tempArr","showDelete_x","show_x","componentDidMount","token","render","fposts","mapStateToProps","all","requested","login","usersObj"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { match } from 'react'\nimport \"./css/HomeContainer.css\";\nimport Postcard from \"./components/PostCard\";\nimport NewPostCard from \"./components/NewPostCard\";\nimport Follows from './components/Follows';\nimport { getFollows, createFollow, deleteFollow } from './redux/actions/FollowActions';\nimport { connect } from 'react-redux';\nimport { getPost, editCaption } from './redux/actions/PostActions';\nimport { fetchUser, fetchAllUsers } from './redux/actions/UserActions';\nimport { addComment, deleteComment } from './redux/actions/CommentsActions';\nimport { changeLike } from './redux/actions/PostActions';\nimport { logout, notRequesting } from './redux/actions/LoginActions';\nimport ProfileCard from './components/ProfilePostCard'\nimport Loader from './components/loader';\nimport Bio from './components/UserBio'\n\n\n\nclass HomeContainer extends React.Component {\n  state = {\n    showCommentField: false,\n    comment: \"\",\n    post_id: \"\",\n    Picture: \"\",\n    caption: \"\",\n    likes: 0,\n    page: \"thePost\",\n    likedPosts: [],\n    postRecieveingComment: null,\n    requesting: false,\n    showingUserId: null,\n    showingOne: false,\n    showOneBio: false,\n    postToDelete:0\n\n  }\n\n\n;\n\ncomponentDidMount() {\n  const { getPost, fetchAllUsers, getFollows } = this.props\n  getPost(); fetchAllUsers(); getFollows()\n  console.log(\"HOME CONTAINER\")\n  const { history } = this.props\n\n  !localStorage.token && history.push('/')\n\n}\n\n// COMMENTS //\n\n\nsubmitComment = (postId) => {\n  const { userid, addComment, user, requestedPost } = this.props\n  const { userId } = this.state\n  const body = {\n    post_id: postId,\n    content: this.state.comment,\n    followee_id: userid\n  }\n  addComment(body)\n  debugger\n  this.resetCommentLength()\n\n};\n\n\npostToCommentOn = (id) => {\n  this.setState({ postRecieveingComment: id })\n}\n\nresetCommentLength = () => {\n  this.setState({ comment: \"\", postRecieveingComment: null })\n}\n\nhandleComment = e => {\n  // console.log(e.target.value);\n  this.setState({\n    [e.target.name]: e.target.value\n  });\n};\n\n\ndeleteComment = (com) => {\n  const { deleteComment } = this.props\n\n  // console.log(com.id, com.post_id, com.followee_id, com.content)\n  deleteComment(com.id, com.post_id, com.followee_id, com.content)\n\n}\n// EDIT CAPTION\n\ngetCapField = () => {\n  this.setState({ editingCaption: !this.state.editingCaption })\n}\nhandleEditSubmit = (id) => {\n  this.props.editCaption(id, this.state.comment)\n  this.setState({ comment: \"\" })\n  this.getCapField()\n}\nshowCommentField = () => {\n  return this.setState({ showCommentField: !this.state.showCommentField })\n}\n\n\n// LIKES //\n\nhandleLikes = (id, likes) => {\n  const { likedPosts } = this.state\n  if (likedPosts.includes(id)) {\n    this.deleteLike(id, likes)\n    const likesArr = likedPosts.filter(pId => pId !== id)\n    this.setState({ likedPosts: likesArr })\n\n  }\n  else {\n    this.addLike(id, likes)\n    const newLikes = [...likedPosts, id]\n    this.setState({ likedPosts: newLikes })\n  }\n\n}\n\naddLike = (id, like) => {\n\n  // this.setState({ liked: !this.state.liked })\n  const numLikes = like + 1\n  this.props.changeLike(id, numLikes, \"add\")\n}\ndeleteLike = (id, like) => {\n  // this.setState({ liked: !this.state.liked })\n  const numLikes = like - 1\n  this.props.changeLike(id, numLikes, \"\")\n}\n\n\n// POST STUFF  //\n\n\nthePost = () => {\n  const { posts, users, history } = this.props\n  const { comment, showCommentField, editingCaption, likedPosts, postToCommentOn, postRecieveingComment } = this.state\n  return posts && posts.length > 0 ? posts.map(post => (\n\n    <Postcard\n      users={users}\n      post={post}\n      history={history}\n      commentLen={comment.length}\n      toggleCommentField={this.showCommentField}\n      commentFieldStatus={showCommentField}\n      yourField={postRecieveingComment}\n      post2comment={this.postToCommentOn}\n      id={post.id}\n      resetComment={this.resetCommentLength}\n      submitComment={() => this.submitComment(post.id, post.userId)}\n      handleComment={this.handleComment}\n      handleLikes={this.handleLikes}\n      getCapEditField={this.getCapField}\n      editCapStatus={editingCaption}\n      submitCapEdit={this.handleEditSubmit}\n      addLike={this.addLike}\n      disLike={this.deleteLike}\n      liked={likedPosts}\n      commentors={this.theUsers}\n      deleteComment={this.deleteComment}\n      showThisUser={this.startShowingOneUser}\n    />\n  )) : console.log(\"The Post didnt work, here are the props:\", this.props)\n};\n\n\n\n// NEW POST STUFF \n// SUBMIT THE COMMENT /FETCH POST\nhandleNewPostClick = () => {\n  this.setState({ newPost: !this.state.newPost });\n};\n\ntheNewPostCard = props => {\n  const { userid } = this.props\n  return (\n    <NewPostCard\n      back={this.returnToThePost}\n    />\n  );\n};\n\nmyProfile = () => {\n  this.props.history.push('/profile')\n};\n\n\nreturnToThePost = () => {\n  this.setState({ page: \"thePost\", showingOne: false })\n}\n\n\nhandleNewPost = e => {\n  this.setState({\n    [e.target.name]: e.target.value\n  });\n};\n\npageToRender = () => {\n  const { showingUserId } = this.state\n  switch (this.state.page) {\n    case \"thePost\":\n      return this.thePost()\n    case \"newPost\":\n      return this.theNewPostCard()\n    case \"profile\":\n      return this.myProfile()\n    case \"show one\":\n      return this.showOneUser(showingUserId)\n  }\n}\n\nstartShowingOneUser = (id) => {\n  this.setState({ showingUserId: id, page: \"show one\", showingOne: !this.state.showing })\n}\nshowOneUser = (id) => {\n  const { users, posts, name } = this.props\n  const theUser = users.find(user => user.id === id)\n  console.log(\"The one user stuff:\", theUser)\n  const userPost = posts.filter(post => post.user_id === theUser.id)\n\n  return this.showOneUsersPost(userPost)\n\n\n}\nshowOneUsersPost = (post) => {\n  const { likedPosts, comment } = this.state\n  const { name, users } = this.props\n\n\n  return post.map(p => <ProfileCard\n    post={p}\n    user_id={p.user_id}\n    users={users}\n    name={name}\n    pic={p.pic}\n    id={p.id}\n    likedPosts={likedPosts}\n    comment={comment}\n    handleLike={this.handleLikes}\n    setId={this.setIdForPostToBeDeleted}\n  />\n  )\n}\nshowOneUserBio = () => {\n  const { users } = this.props\n  const { showingUserId } = this.state\n  const theUser = users.find(user => user.id === showingUserId)\n\n  return <Bio\n    user={theUser.username}\n    pic={theUser.picture}\n    bio={theUser.bio}\n    city={theUser.city}\n    state={theUser.state}\n    home={this.returnToThePost}\n\n\n  />\n\n}\n\n// LOGOUT //\n\nappLogout = () => {\n  const { logout } = this.props\n  logout()\n  localStorage.clear()\n  localStorage.length === 0 && this.returnToLogoutPage()\n\n}\n\nreturnToLogoutPage = () => {\n  const { requestedLogin, logout } = this.props\n  logout()\n  this.props.history.push('/')\n}\ntheUsers = () => {\n  const { users } = this.props\n  const commentor = {}\n  if (!!users) {\n    this.props.users.forEach(user => commentor[user.id] = user.username)\n    return commentor\n  }\n}\n\n// FREINDS\nfolloweeIds = () => {\n  // EVERYONE WHO IS FOLLOWED\n  const foll = this.props.follows.map(f => f.followee_id)\n  const followees = [...new Set(foll)] // deletes/ filters duplicates out of arrays\n  return followees\n}\ntheFollow = (ErId, EeId) => {\n\n  return this.props.follows.find(f => f.follower_id === ErId && f.followee_id === EeId).id\n}\nwhoImFollowing = () => {\n  const { follows, userid, users } = this.props\n  const peepsImFollowing = users.filter(u => follows.filter(f =>\n    f.follower_id === userid && f.followee_id === u.id))\n  return peepsImFollowing\n}\nwhoImNotFollowing = () => {\n  const { follows, userid, users } = this.props\n  const peepsImFollowing = users.filter(u => follows.map(f =>\n    f.follower_id !== userid && f.followee_id === u.id))\n  return peepsImFollowing\n}\n\nfriends = () => {\n  const { follows, userid, users, deleteFollow, user } = this.props\n  const friendsArr = follows.filter(f => f.follower_id === userid).map(f => f.followee_id)\n\n  const theFriends = friendsArr.map(f => users.find(user => user.id === f))\n\n  if (theFriends.length > 0) {\n    return theFriends.map(f => <div> <img src={f.picture} className=\"friends-or-not-image\" onClick={() => this.startShowingOneUser(f.id)\n    } /> <br /><span className=\"friends-or-not-name\" id={f.id} onClick={() => deleteFollow(this.theFollow(userid, f.id))}>{`${f.username} ùö°`}</span> </div>)\n  }\n  else {\n    return <div className=\"make-some-friends\">\n\n      <p>{`‚¨ÖÔ∏è Hey ${user}, Make Some ‚¨ÖÔ∏è New Friends!`} </p>\n\n    </div>\n  }\n\n}\nSuggestedfriends = () => {\n  const { createFollow, userid, users, follows } = this.props\n  const allButMe = users.filter(user => user.id !== userid)\n  const nonfriendsArr = follows.filter(f => f.follower_id !== userid).map(f => f.followee_id)\n  const friendsArr = follows.filter(f => f.follower_id === userid).map(f => f.followee_id)\n  const usersSinFollowers = allButMe.filter(u => !this.followeeIds().includes(u.id))\n  const nonFollowers = allButMe.filter(u => nonfriendsArr.includes(u.id) && !friendsArr.includes(u.id))\n  const tempArr = [...nonFollowers, ...usersSinFollowers]\n  const whoImNotFollowing = [...new Set(tempArr)]\n\n\n\n  return whoImNotFollowing.map(f => <div> <img src={f.picture} className=\"friends-or-not-image\" onClick={() => {\n\n    this.startShowingOneUser(f.id)\n  }} /> <br /><span className=\"friends-or-not-name\" onClick={() => createFollow(f.id, userid)} id={f.id}>{` ${f.username} ‚úì`}</span></div>)\n\n}\n\n\n// SINGLE PAGE USER AND POST OPTIONS\nsetIdForPostToBeDeleted = (id) => {\n  this.setState({ postToDelete: id })\n  this.showDelete_x()\n  console.log(this.state.postToDelete)\n\n}\nshowDelete_x = () => {\n  this.setState({ show_x: !this.state.show_x })\n}\n\nrender() {\n  // debugger\n  // console.log(\"Home Container props\", this.props);\n\n  const { fposts, user, userId, history, requestedLogin, picture } = this.props;\n  const { showingOne, showingUserId } = this.state\n  this.theUsers()\n  this.followeeIds()\n  this.whoImFollowing()\n\n  return (\n    <div className=\"Home-Container\">\n      <Follows />\n      <nav className=\"Homepage-nav\">\n        <ul>\n          <li id=\"jays-gram\" onClick={() => this.returnToThePost()}><span >{this.props.user}s'taGram </span>\n            <p onClick={this.appLogout} className=\"logout\" > logout  </p></li>\n\n          <li>\n            <p className=\"camera\" id={this.state.id} onClick={() => this.setState({ page: \"newPost\" })}> üì∏ </p>\n          </li>\n\n\n          <li className=\"thumbnail\" onClick={() => this.setState({ page: \"profile\" })}><img src={picture} id='thumbnail' /> </li>\n\n        </ul>\n      </nav>\n\n      <div className={!localStorage.token ? \"loading \" : \"Home-Content\"}>\n\n        <div className=\"sugested-friends\">\n          {!showingOne ? <span className=\"friends-and-suggested-headers\"> Suggested</span> : null}\n          {!showingOne ? this.Suggestedfriends() : this.showOneUserBio()}\n        </div>\n\n        {!showingOne ? <div className=\"friends\">\n          <span className=\"friends-and-suggested-headers\">Friends</span>\n          {this.friends()}\n        </div> : null}\n\n        {this.pageToRender()}\n        {this.state.page !== \"newPost\" ? <div className=\"Home-footer\">Copyright &copy; 2019 Jaystagram</div> : <></>}\n      </div>\n\n    </div>\n\n\n\n  );\n}\n\n}\nconst mapStateToProps = (state) => {\n  return {\n    user: state.users.username,\n    userid: state.users.id,\n    picture: state.users.picture,\n    users: state.users.all,\n    posts: state.post.posts,\n    requestedPost: state.post.requested,\n    requestedLogin: state.login.requested,\n    follows: state.follows.follows,\n    name: state.users.usersObj,\n  }\n}\n\nexport default connect(mapStateToProps, { getFollows, getPost, fetchAllUsers, fetchUser, addComment, editCaption, changeLike, logout, notRequesting, deleteComment, createFollow, deleteFollow })(HomeContainer);\n\n\n"]},"metadata":{},"sourceType":"module"}