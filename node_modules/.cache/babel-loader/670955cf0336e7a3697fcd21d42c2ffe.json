{"ast":null,"code":"import _toConsumableArray from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{REQUESTING,POST_SUCCESS,POST_FAILURE,CREATE_POST,EDIT_POST_CAPTION,ADD_LIKE,DELETE_LIKE,DELETE_POST,ADD_COMMENT,EDIT_COMMENT,DELETE_COMMENT}from'../actions/types';var initialState={posts:[],requested:null,success:null,errorMessage:\"\",editingPost:false,submittedComment:false};export default(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){//POST PROPER\ncase REQUESTING:return _objectSpread({},state,{requested:true});case POST_SUCCESS:return _objectSpread({},state,{requested:false,success:true,posts:action.payload});case POST_FAILURE:return _objectSpread({},state,{success:false,requested:false,errorMessage:action.payload});case CREATE_POST:var newPost=[action.payload].concat(_toConsumableArray(state.posts));return _objectSpread({},state,{requested:false,success:true,posts:newPost});case EDIT_POST_CAPTION:var idx=state.posts.findIndex(function(post){return post.id===action.id;});var post=state.posts[idx];var posts=[].concat(_toConsumableArray(state.posts.slice(0,idx)),[Object.assign({},post,action.payload)],_toConsumableArray(state.posts.slice(idx+1)));return _objectSpread({},state,{posts:posts});case DELETE_POST:var remainingPost=state.posts.filter(function(post){return post.id!==action.id;});return _objectSpread({},state,{posts:remainingPost});// COMMENTS \ncase EDIT_COMMENT:var ixa=state.comments.findIndex(function(com){return com.id===action.payload.id;});var com=state.comments[ixa];return _objectSpread({},state,{comments:[state.comments.slice(0,ixa),Object.assign({},com,action.payload),state.comments.slice(ixa+1)]});case DELETE_COMMENT:var postIdx=state.posts.findIndex(function(p){return p.id===action.post_id;});var post2deleteCom=state.posts[postIdx];var remainingComments=post2deleteCom.comments.filter(function(comment){return comment.id!==action.id;});var returnPosts=[].concat(_toConsumableArray(state.posts.slice(0,postIdx)),[Object.assign({},post2deleteCom,{comments:remainingComments})],_toConsumableArray(state.posts.slice(postIdx+1)));return _objectSpread({},state,{posts:returnPosts});case ADD_COMMENT:var idb=state.posts.findIndex(function(post){return post.id===action.payload.post_id;});var thePost=state.posts[idb];var newPosts=[].concat(_toConsumableArray(state.posts.slice(0,idb)),[Object.assign({},thePost,{comments:[].concat(_toConsumableArray(thePost.comments),[action.payload])})],_toConsumableArray(state.posts.slice(idb+1)));return _objectSpread({},state,{requested:false,posts:newPosts});// LIKES\ncase ADD_LIKE:var ix=state.posts.findIndex(function(p){return p.id===action.id;});var likedpost=state.posts[ix];return _objectSpread({},state,{requested:false,posts:[].concat(_toConsumableArray(state.posts.slice(0,ix)),[Object.assign({},likedpost,{likes:likedpost.likes+1})],_toConsumableArray(state.posts.slice(ix+1)))});case DELETE_LIKE:var iz=state.posts.findIndex(function(p){return p.id===action.id;});var dislikedpost=state.posts[iz];if(dislikedpost.likes>0){return _objectSpread({},state,{requested:false,posts:[].concat(_toConsumableArray(state.posts.slice(0,iz)),[Object.assign({},dislikedpost,{likes:dislikedpost.likes-1})],_toConsumableArray(state.posts.slice(iz+1)))});}//END\ndefault:return state;}});","map":{"version":3,"sources":["/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/redux/reducers/PostReducer.js"],"names":["REQUESTING","POST_SUCCESS","POST_FAILURE","CREATE_POST","EDIT_POST_CAPTION","ADD_LIKE","DELETE_LIKE","DELETE_POST","ADD_COMMENT","EDIT_COMMENT","DELETE_COMMENT","initialState","posts","requested","success","errorMessage","editingPost","submittedComment","state","action","type","payload","newPost","idx","findIndex","post","id","slice","Object","assign","remainingPost","filter","ixa","comments","com","postIdx","p","post_id","post2deleteCom","remainingComments","comment","returnPosts","idb","thePost","newPosts","ix","likedpost","likes","iz","dislikedpost"],"mappings":"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","sourcesContent":["import {\n    REQUESTING, POST_SUCCESS, POST_FAILURE, CREATE_POST, EDIT_POST_CAPTION, ADD_LIKE, DELETE_LIKE, DELETE_POST, ADD_COMMENT, EDIT_COMMENT, DELETE_COMMENT\n} from '../actions/types'\n\nconst initialState = {\n    posts: [],\n    requested: null,\n    success: null,\n    errorMessage: \"\",\n    editingPost: false,\n    submittedComment: false,\n\n}\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        //POST PROPER\n        case REQUESTING:\n            return { ...state, requested: true }\n        case POST_SUCCESS:\n            return {\n                ...state, requested: false, success: true,\n                posts: action.payload\n            }\n        case POST_FAILURE:\n            return { ...state, success: false, requested: false, errorMessage: action.payload }\n\n        case CREATE_POST:\n            const newPost = [action.payload, ...state.posts]\n            return {\n                ...state, requested: false, success: true,\n                posts: newPost\n            }\n        case EDIT_POST_CAPTION:\n\n            const idx = state.posts.findIndex(post => post.id === action.id)\n            const post = state.posts[idx]\n            const posts = [\n                ...state.posts.slice(0, idx),\n                Object.assign({}, post, action.payload),\n                ...state.posts.slice(idx + 1)\n            ]\n            return {\n                ...state,\n                posts\n            }\n        case DELETE_POST:\n            const remainingPost = state.posts.filter(post => post.id !== action.id)\n            return {...state,\n                posts: remainingPost\n            }\n\n        // COMMENTS \n\n\n        case EDIT_COMMENT:\n            const ixa = state.comments.findIndex(com => com.id === action.payload.id)\n            const com = state.comments[ixa]\n            return {\n                ...state,\n                comments: [state.comments.slice(0, ixa),\n                Object.assign({}, com, action.payload),\n                state.comments.slice(ixa + 1)]\n            }\n        case DELETE_COMMENT:\n\n            const postIdx = state.posts.findIndex(p => p.id === action.post_id)\n            const post2deleteCom = state.posts[postIdx]\n            const remainingComments = post2deleteCom.comments.filter(comment => comment.id !== action.id)\n            const returnPosts = [...state.posts.slice(0, postIdx),\n            Object.assign({}, post2deleteCom, { comments: remainingComments }),\n            ...state.posts.slice(postIdx + 1)\n            ]\n\n\n            return {\n                ...state,\n                posts: returnPosts\n\n            }\n        case ADD_COMMENT:\n            const idb = state.posts.findIndex(post => post.id === action.payload.post_id)\n            const thePost = state.posts[idb]\n            const newPosts = [...state.posts.slice(0, idb),\n              \n            Object.assign({}, thePost, { comments: [...thePost.comments, action.payload] }), ...state.posts.slice(idb + 1)]\n\n            return {\n                ...state,\n                requested: false,\n                posts: newPosts\n\n\n            }\n\n        // LIKES\n        case ADD_LIKE:\n            const ix = state.posts.findIndex(p => p.id === action.id)\n            const likedpost = state.posts[ix]\n            return {\n                ...state,\n                requested: false,\n                posts: [...state.posts.slice(0, ix),\n                Object.assign({}, likedpost, { likes: likedpost.likes + 1 }),\n                ...state.posts.slice(ix + 1)\n                ]\n            }\n        case DELETE_LIKE:\n            const iz = state.posts.findIndex(p => p.id === action.id)\n            const dislikedpost = state.posts[iz]\n            if (dislikedpost.likes > 0) {\n                return {\n                    ...state,\n                    requested: false,\n                    posts: [...state.posts.slice(0, iz),\n                    Object.assign({}, dislikedpost, { likes: dislikedpost.likes - 1 }),\n                    ...state.posts.slice(iz + 1)\n                    ]\n                }\n            }\n\n\n        //END\n        default:\n            return state;\n    }\n\n}"]},"metadata":{},"sourceType":"module"}