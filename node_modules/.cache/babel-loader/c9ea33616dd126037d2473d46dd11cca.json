{"ast":null,"code":"var _jsxFileName = \"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/HomeContainer.js\";\nimport React from \"react\";\nimport \"./css/HomeContainer.css\";\nimport Postcard from \"./components/PostCard\";\nimport NewPostCard from \"./components/NewPostCard\";\nimport Follows from './components/Follows';\nimport { getFollows } from './redux/actions/FollowActions';\nimport { connect } from 'react-redux';\nimport { getPost, editCaption } from './redux/actions/PostActions';\nimport { fetchUser, fetchAllUsers } from './redux/actions/UserActions';\nimport { addComment, deleteComment } from './redux/actions/CommentsActions';\nimport { changeLike } from './redux/actions/PostActions';\nimport { logout, notRequesting } from './redux/actions/LoginActions';\nimport Loader from './components/loader';\n\nclass HomeContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showCommentField: false,\n      comment: \"\",\n      post_id: \"\",\n      Picture: \"\",\n      caption: \"\",\n      likes: 0,\n      page: \"thePost\",\n      editingCaption: false,\n      likedPosts: [],\n      postRecieveingComment: null,\n      requesting: false\n    };\n\n    this.submitComment = postId => {\n      const _this$props = this.props,\n            userid = _this$props.userid,\n            addComment = _this$props.addComment,\n            user = _this$props.user,\n            requestedPost = _this$props.requestedPost;\n      const _this$state = this.state,\n            userId = _this$state.userId,\n            comment = _this$state.comment;\n      console.log(\"Post_id\", postId, \"User is:\", user, \"comment: \", this.state.comment);\n      const body = {\n        post_id: postId,\n        content: comment,\n        followee_id: userid\n      };\n      addComment(body);\n      !requestedPost && this.setState({\n        comment: \" \",\n        showCommentField: false\n      });\n    };\n\n    this.postToCommentOn = id => {\n      this.setState({\n        postRecieveingComment: id\n      });\n    };\n\n    this.resetCommentLength = () => {\n      this.setState({\n        comment: \"\",\n        postRecieveingComment: null\n      });\n    };\n\n    this.handleComment = e => {\n      // console.log(e.target.value);\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.deleteComment = com => {\n      const deleteComment = this.props.deleteComment; // console.log(com.id, com.post_id, com.followee_id, com.content)\n\n      deleteComment(com.id, com.post_id, com.followee_id, com.content);\n    };\n\n    this.getCapField = () => {\n      this.setState({\n        editingCaption: !this.state.editingCaption\n      });\n    };\n\n    this.handleEditSubmit = id => {\n      this.props.editCaption(id, this.state.comment);\n      this.setState({\n        comment: \"\"\n      });\n      this.getCapField();\n    };\n\n    this.showCommentField = () => {\n      return this.setState({\n        showCommentField: !this.state.showCommentField\n      });\n    };\n\n    this.handleLikes = (id, likes) => {\n      const likedPosts = this.state.likedPosts;\n\n      if (likedPosts.includes(id)) {\n        this.deleteLike(id, likes);\n        const likesArr = likedPosts.filter(pId => pId !== id);\n        this.setState({\n          likedPosts: likesArr\n        });\n      } else {\n        this.addLike(id, likes);\n        const newLikes = [...likedPosts, id];\n        this.setState({\n          likedPosts: newLikes\n        });\n      }\n    };\n\n    this.addLike = (id, like) => {\n      // this.setState({ liked: !this.state.liked })\n      const numLikes = like + 1;\n      this.props.changeLike(id, numLikes, \"add\");\n    };\n\n    this.deleteLike = (id, like) => {\n      // this.setState({ liked: !this.state.liked })\n      const numLikes = like - 1;\n      this.props.changeLike(id, numLikes, \"\");\n    };\n\n    this.thePost = () => {\n      const _this$props2 = this.props,\n            posts = _this$props2.posts,\n            users = _this$props2.users;\n      const _this$state2 = this.state,\n            comment = _this$state2.comment,\n            showCommentField = _this$state2.showCommentField,\n            editingCaption = _this$state2.editingCaption,\n            likedPosts = _this$state2.likedPosts,\n            postToCommentOn = _this$state2.postToCommentOn,\n            postRecieveingComment = _this$state2.postRecieveingComment;\n      return posts && posts.length > 0 ? posts.map(post => React.createElement(Postcard, {\n        users: users,\n        post: post,\n        commentLen: comment.length,\n        toggleCommentField: this.showCommentField,\n        commentFieldStatus: showCommentField,\n        yourField: postRecieveingComment,\n        post2comment: this.postToCommentOn,\n        id: post.id,\n        resetComment: this.resetCommentLength,\n        submitComment: () => this.submitComment(post.id, post.userId),\n        handleComment: this.handleComment,\n        handleLikes: this.handleLikes,\n        getCapEditField: this.getCapField,\n        editCapStatus: editingCaption,\n        submitCapEdit: this.handleEditSubmit,\n        addLike: this.addLike,\n        disLike: this.deleteLike,\n        liked: likedPosts,\n        commentors: this.theUsers,\n        deleteComment: this.deleteComment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })) : console.log(\"The Post didnt work, here are the props:\", this.props);\n    };\n\n    this.handleNewPostClick = () => {\n      this.setState({\n        newPost: !this.state.newPost\n      });\n    };\n\n    this.theNewPostCard = props => {\n      const userid = this.props.userid;\n      return React.createElement(NewPostCard, {\n        back: this.returnToThePost,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      });\n    };\n\n    this.myProfile = () => {\n      this.props.history.push('/profile');\n    };\n\n    this.returnToThePost = () => {\n      this.setState({\n        page: \"thePost\"\n      });\n    };\n\n    this.handleNewPost = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.pageToRender = () => {\n      switch (this.state.page) {\n        case \"thePost\":\n          return this.thePost();\n\n        case \"newPost\":\n          return this.theNewPostCard();\n\n        case \"profile\":\n          return this.myProfile();\n      }\n    };\n\n    this.appLogout = () => {\n      const logout = this.props.logout;\n      logout();\n      localStorage.clear();\n      localStorage.length === 0 && this.returnToLogoutPage();\n    };\n\n    this.returnToLogoutPage = () => {\n      const _this$props3 = this.props,\n            requestedLogin = _this$props3.requestedLogin,\n            logout = _this$props3.logout;\n      logout();\n      this.props.history.push('/');\n    };\n\n    this.theUsers = () => {\n      const users = this.props.users;\n      const commentor = {};\n\n      if (!!users) {\n        this.props.users.forEach(user => commentor[user.id] = user.username);\n        return commentor;\n      }\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"HOME CONTAINER\");\n    const history = this.props.history;\n    !localStorage.token && history.push('/');\n  } // COMMENTS //\n\n\n  render() {\n    // debugger\n    console.log(\"Home Container props\", this.props);\n    const _this$props4 = this.props,\n          fposts = _this$props4.fposts,\n          user = _this$props4.user,\n          userId = _this$props4.userId,\n          history = _this$props4.history,\n          requestedLogin = _this$props4.requestedLogin,\n          picture = _this$props4.picture,\n          us = _this$props4.us;\n    const requesting = this.state.requesting;\n    this.theUsers();\n    return React.createElement(\"div\", {\n      className: \"Home-Container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(Follows, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"Homepage-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"jays-gram\",\n      onClick: () => this.returnToThePost(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, this.props.user, \"s'taGram \")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"camera\",\n      id: this.state.id,\n      onClick: () => this.setState({\n        page: \"newPost\"\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \" \\uD83D\\uDCF8 \")), React.createElement(\"div\", {\n      className: \"thumb-and-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"thumbnail\",\n      onClick: () => this.setState({\n        page: \"profile\"\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: picture,\n      id: \"thumbnail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }), \" \"), React.createElement(\"div\", {\n      className: \"logout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      onClick: this.appLogout,\n      id: \"logout-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \" logout  \")))), React.createElement(\"div\", {\n      className: !localStorage.token ? \"loading \" : \"Home-Content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, this.pageToRender(), this.state.page !== \"newPost\" ? React.createElement(\"div\", {\n      className: \"Home-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"Copyright \\xA9 2019 Jaystagram\") : React.createElement(React.Fragment, null)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.users.username,\n    userid: state.users.id,\n    picture: state.users.picture,\n    users: state.users.all,\n    posts: state.post.posts,\n    requestedPost: state.post.requested,\n    requestedLogin: state.login.requested\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getFollows,\n  getPost,\n  fetchAllUsers,\n  fetchUser,\n  addComment,\n  editCaption,\n  changeLike,\n  logout,\n  notRequesting,\n  deleteComment\n})(HomeContainer);","map":{"version":3,"sources":["/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/HomeContainer.js"],"names":["React","Postcard","NewPostCard","Follows","getFollows","connect","getPost","editCaption","fetchUser","fetchAllUsers","addComment","deleteComment","changeLike","logout","notRequesting","Loader","HomeContainer","Component","state","showCommentField","comment","post_id","Picture","caption","likes","page","editingCaption","likedPosts","postRecieveingComment","requesting","submitComment","postId","props","userid","user","requestedPost","userId","console","log","body","content","followee_id","setState","postToCommentOn","id","resetCommentLength","handleComment","e","target","name","value","com","getCapField","handleEditSubmit","handleLikes","includes","deleteLike","likesArr","filter","pId","addLike","newLikes","like","numLikes","thePost","posts","users","length","map","post","theUsers","handleNewPostClick","newPost","theNewPostCard","returnToThePost","myProfile","history","push","handleNewPost","pageToRender","appLogout","localStorage","clear","returnToLogoutPage","requestedLogin","commentor","forEach","username","componentDidMount","token","render","fposts","picture","us","mapStateToProps","all","requested","login"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./css/HomeContainer.css\";\nimport Postcard from \"./components/PostCard\";\nimport NewPostCard from \"./components/NewPostCard\";\nimport Follows from './components/Follows';\nimport { getFollows } from './redux/actions/FollowActions';\nimport { connect } from 'react-redux';\nimport { getPost, editCaption } from './redux/actions/PostActions';\nimport { fetchUser, fetchAllUsers } from './redux/actions/UserActions';\nimport { addComment,deleteComment  } from './redux/actions/CommentsActions';\nimport { changeLike } from './redux/actions/PostActions';\nimport { logout, notRequesting } from './redux/actions/LoginActions';\nimport Loader from './components/loader';\n\n\nclass HomeContainer extends React.Component {\n  state = {\n    showCommentField: false,\n    comment: \"\",\n    post_id: \"\",\n    Picture: \"\",\n    caption: \"\",\n    likes: 0,\n    page: \"thePost\",\n    editingCaption: false,\n    likedPosts: [],\n    postRecieveingComment:null,\n    requesting: false\n\n\n  };\n\n  componentDidMount() {\n\n    console.log(\"HOME CONTAINER\")\n    const {  history } = this.props\n   \n    !localStorage.token && history.push('/')\n\n  }\n\n                              // COMMENTS //\n\n\n  submitComment = (postId) => {\n    const { userid, addComment, user, requestedPost } = this.props\n    const { userId, comment } = this.state\n    console.log(\n      \"Post_id\",\n      postId,\n      \"User is:\",\n      user,\n      \"comment: \",\n      this.state.comment\n    );\n    const body = {\n      post_id: postId,\n      content: comment,\n      followee_id: userid\n    }\n    addComment(body)\n    !requestedPost && this.setState({ comment: \" \", showCommentField: false })\n  };\n\n\npostToCommentOn=(id)=>{\nthis.setState( {postRecieveingComment: id })\n}\n\n  resetCommentLength = () => {\n    this.setState({ comment: \"\",postRecieveingComment: null  })\n  }\n\n  handleComment = e => {\n    // console.log(e.target.value);\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n\n\n  deleteComment = (com) => {\n    const {deleteComment  } = this.props\n   \n    // console.log(com.id, com.post_id, com.followee_id, com.content)\n    deleteComment(com.id, com.post_id, com.followee_id, com.content)\n\n  }\n                            // EDIT CAPTION\n\n  getCapField = () => {\n    this.setState({ editingCaption: !this.state.editingCaption })\n  }\n  handleEditSubmit = (id) => {\n    this.props.editCaption(id, this.state.comment)\n    this.setState({ comment: \"\" })\n    this.getCapField()\n  }\n  showCommentField = () => {\n    return this.setState({ showCommentField: !this.state.showCommentField })\n  }\n\n\n                               // LIKES //\n\n  handleLikes =(id,likes)=>{\n    const {likedPosts } = this.state\n    if(likedPosts.includes(id)){\n      this.deleteLike(id, likes)\n        const likesArr = likedPosts.filter(pId => pId !== id)\n        this.setState( {likedPosts: likesArr } )\n\n    }\n    else {\n      this.addLike(id, likes)\n      const newLikes = [...likedPosts, id]\n      this.setState( {likedPosts: newLikes } )\n    }\n\n  }\n\n  addLike = (id, like) => {\n\n    // this.setState({ liked: !this.state.liked })\n    const numLikes = like + 1\n    this.props.changeLike(id, numLikes, \"add\")\n  }\n  deleteLike = (id, like) => {\n    // this.setState({ liked: !this.state.liked })\n    const numLikes = like - 1\n    this.props.changeLike(id, numLikes, \"\")\n  }\n\n\n                                  // POST STUFF  //\n\n\n  thePost = () => {\n    const { posts, users } = this.props\n    const { comment, showCommentField, editingCaption, likedPosts, postToCommentOn,postRecieveingComment } = this.state\n    return posts && posts.length > 0 ? posts.map(post => (\n\n      <Postcard\n        users={users}\n        post={post}\n        commentLen={comment.length}\n        toggleCommentField={this.showCommentField}\n        commentFieldStatus={showCommentField}\n        yourField={postRecieveingComment}\n        post2comment={this.postToCommentOn}\n        id={post.id}\n        resetComment={this.resetCommentLength}\n        submitComment={() => this.submitComment(post.id, post.userId)}\n        handleComment={this.handleComment}\n        handleLikes={this.handleLikes}\n        getCapEditField={this.getCapField}\n        editCapStatus={editingCaption}\n        submitCapEdit={this.handleEditSubmit}\n        addLike={this.addLike}\n        disLike={this.deleteLike}\n        liked={likedPosts}\n        commentors={this.theUsers}\n        deleteComment={this.deleteComment}\n      />\n    )) : console.log(\"The Post didnt work, here are the props:\", this.props)\n  };\n\n\n\n  // NEW POST STUFF \n  // SUBMIT THE COMMENT /FETCH POST\n  handleNewPostClick = () => {\n    this.setState({ newPost: !this.state.newPost });\n  };\n\n  theNewPostCard = props => {\n    const { userid } = this.props\n    return (\n      <NewPostCard\n        back={this.returnToThePost}\n      />\n    );\n  };\n\n  myProfile = () => {\n    this.props.history.push('/profile')\n  };\n\n\n  returnToThePost = () => {\n    this.setState({ page: \"thePost\" })\n  }\n\n\n  handleNewPost = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n\n  pageToRender = () => {\n\n    switch (this.state.page) {\n      case \"thePost\":\n        return this.thePost()\n      case \"newPost\":\n        return this.theNewPostCard()\n      case \"profile\":\n        return this.myProfile()\n    }\n  }\n\n  // LOGOUT //\n\n  appLogout = () => {\n    const { logout } = this.props\n    logout()\n    localStorage.clear()\n    localStorage.length === 0 && this.returnToLogoutPage()\n\n  }\n\n  returnToLogoutPage = () => {\n    const { requestedLogin, logout } = this.props\n    logout()\n    this.props.history.push('/')\n  }\n  theUsers = () => {\n    const { users } = this.props\n    const commentor = {}\n    if (!!users) {\n      this.props.users.forEach(user => commentor[user.id] = user.username)\n      return commentor\n    }\n  }\n\n  render() {\n    // debugger\n    console.log(\"Home Container props\", this.props);\n\n    const { fposts, user, userId, history, requestedLogin, picture, us } = this.props;\n    const { requesting } = this.state\n    this.theUsers()\n\n    return (\n      <div className=\"Home-Container\">\n        <Follows />\n        <div className=\"Homepage-nav\">\n\n          <div id=\"jays-gram\" onClick={() => this.returnToThePost()}><span >{this.props.user}s'taGram </span></div>\n\n          <div>\n            <p className=\"camera\" id={this.state.id} onClick={() => this.setState({ page: \"newPost\" })}> ðŸ“¸ </p>\n          </div>\n\n          <div className=\"thumb-and-button\">\n            <div className=\"thumbnail\" onClick={() => this.setState({ page: \"profile\" })}><img src={picture} id='thumbnail' /> </div>\n            <div className=\"logout\"><p onClick={this.appLogout} id=\"logout-button\" > logout  </p></div>\n\n\n\n          </div>\n\n\n        </div>\n\n        <div className={!localStorage.token ? \"loading \" : \"Home-Content\"}>\n          {}\n          {this.pageToRender()}\n          {this.state.page !== \"newPost\" ? <div className=\"Home-footer\">Copyright &copy; 2019 Jaystagram</div> : <></>}\n        </div>\n      </div>\n\n\n\n    );\n  }\n\n}\nconst mapStateToProps = (state) => {\n  return {\n    user: state.users.username,\n    userid: state.users.id,\n    picture: state.users.picture,\n    users: state.users.all,\n    posts: state.post.posts,\n    requestedPost: state.post.requested,\n    requestedLogin: state.login.requested\n  }\n}\n\nexport default connect(mapStateToProps, { getFollows, getPost, fetchAllUsers, fetchUser, addComment, editCaption, changeLike, logout, notRequesting,deleteComment  })(HomeContainer);\n\n\n"]},"metadata":{},"sourceType":"module"}