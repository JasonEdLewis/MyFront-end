{"ast":null,"code":"import { USER_REQUEST, USER_SUCCESS, USER_FAILURE, GET_ALL, CREATE_USER, UPDATE_USER, DELETE_USER, FINISHED_REQUESTING } from '../actions/types';\nimport axios from 'axios';\nexport const fetchAllUsers = () => async dispatch => {\n  const users = await axios.get('http://localhost:3000/users');\n\n  const usersObj = () => {\n    const obj = {};\n    users.data.forEach(user => obj[user.id] = user.username);\n    return obj;\n  };\n\n  dispatch({\n    type: GET_ALL,\n    payload: users.data,\n    usersObj: usersObj(),\n    requested: false\n  });\n};\nexport const fetchUser = token => async dispatch => {\n  dispatch({\n    type: USER_REQUEST\n  });\n  const config = {\n    headers: {\n      \"Content-Type\": \"Application/json\",\n      Authorization: token\n    }\n  };\n  const user = await axios.get('http://localhost:3000/profile', config);\n  console.log(user.username);\n  !!user ? dispatch({\n    type: USER_SUCCESS,\n    payload: user.data\n  }) : dispatch({\n    type: USER_FAILURE,\n    payload: user.message\n  });\n  !!user && localStorage.setItem(\"currentUser\", user.data.username, 'currentUserId', user.data.id, user.data.bio, user.data.city, user.data.state);\n  return console.log(\"From fetch User in UsersActions\", user.data);\n};\nexport const newUser = info => dispatch => {\n  dispatch({\n    type: USER_REQUEST\n  });\n  return axios.post('http://localhost:3000/signup', info).then(user => dispatch({\n    type: CREATE_USER,\n    payload: user.data,\n    requested: false\n  }));\n};\nexport const editUser = (user_id, info) => dispatch => {\n  dispatch({\n    type: USER_REQUEST\n  });\n  return axios.patch(\"http://localhost:3000/users/\".concat(user_id), info).then(data => {\n    dispatch({\n      type: UPDATE_USER,\n      payload: data.data\n    });\n    localStorage.setItem(\"currentUser\", data.data.username);\n    console.log(data);\n  });\n};\nexport const deleteUser = id => dispatch => {\n  dispatch({\n    type: USER_REQUEST\n  });\n  localStorage.clear();\n  return axios.delete(\"http://localhost:3000/users/\".concat(id)).then(dispatch({\n    type: DELETE_USER,\n    id,\n    requested: false\n  })).then(dispatch({\n    type: FINISHED_REQUESTING\n  }));\n};","map":{"version":3,"sources":["/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/redux/actions/UserActions.js"],"names":["USER_REQUEST","USER_SUCCESS","USER_FAILURE","GET_ALL","CREATE_USER","UPDATE_USER","DELETE_USER","FINISHED_REQUESTING","axios","fetchAllUsers","dispatch","users","get","usersObj","obj","data","forEach","user","id","username","type","payload","requested","fetchUser","token","config","headers","Authorization","console","log","message","localStorage","setItem","bio","city","state","newUser","info","post","then","editUser","user_id","patch","deleteUser","clear","delete"],"mappings":"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","sourcesContent":["import { USER_REQUEST, USER_SUCCESS, USER_FAILURE, GET_ALL, CREATE_USER, UPDATE_USER, DELETE_USER, FINISHED_REQUESTING } from '../actions/types';\nimport axios from 'axios';\n\nexport const fetchAllUsers = () => async dispatch => {\n    const users = await axios.get('http://localhost:3000/users');\n    const usersObj = () => {\n        const obj = {}\n        users.data.forEach(user => obj[user.id] = user.username)\n        return obj\n    }\n    \n    dispatch({ type: GET_ALL, payload: users.data, usersObj: usersObj(), requested: false });\n\n}\nexport const fetchUser = (token) => async dispatch => {\n    dispatch({ type: USER_REQUEST })\n    const config = {\n        headers: {\n            \"Content-Type\": \"Application/json\",\n            Authorization: token\n        }\n    }\n    const user = await axios.get('http://localhost:3000/profile', config);\n    console.log(user.username)\n    !!user ? dispatch({ type: USER_SUCCESS, payload: user.data })\n        : dispatch({ type: USER_FAILURE, payload: user.message })\n\n    !!user && localStorage.setItem(\"currentUser\", user.data.username, 'currentUserId', user.data.id, user.data.bio, user.data.city, user.data.state)\n    return console.log(\"From fetch User in UsersActions\", user.data);\n\n}\n\nexport const newUser = (info) => dispatch => {\n    dispatch({ type: USER_REQUEST })\n    return axios.post('http://localhost:3000/signup', info).then(user => dispatch({ type: CREATE_USER, payload: user.data, requested: false })\n    )\n}\nexport const editUser = (user_id, info) => dispatch => {\n    dispatch( { type: USER_REQUEST } )\n    return axios.patch(`http://localhost:3000/users/${user_id}`, info)\n        .then(data => {\n            dispatch( {type:UPDATE_USER, payload:data.data })\n            localStorage.setItem(\"currentUser\", data.data.username)\n            console.log(data)\n           })\n}\n\nexport const deleteUser = (id) => dispatch => {\n    dispatch({ type: USER_REQUEST })\n    localStorage.clear()\n    return axios.delete(`http://localhost:3000/users/${id}`)\n        .then(dispatch({ type: DELETE_USER, id, requested: false }))\n        .then(dispatch({ type: FINISHED_REQUESTING }))\n\n\n\n}\n"]},"metadata":{},"sourceType":"module"}