{"ast":null,"code":"import _defineProperty from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import'../css/newPostCard.css';import{storage}from'../firebase/index';import Loader from'../components/loader';import{connect}from'react-redux';import{createPost}from'../redux/actions/PostActions';//  SET UP FETCH POST FOR NEW POST AND CREATE MIGRATTION FOR CAPTION FOR POST AND SET UP TO GO BACK THE HOME PAGE AFTER POST IS FINISHED POSTING\nvar NewPostCard=/*#__PURE__*/function(_React$Component){_inherits(NewPostCard,_React$Component);function NewPostCard(){var _getPrototypeOf2;var _this;_classCallCheck(this,NewPostCard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NewPostCard)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={image:null,url:\"\",caption:\"\",loading:false};_this.selectedFileHander=function(e){if(e.target.files[0]){_this.setState({image:e.target.files[0]});};};_this.handleSubmit=function(){var image=_this.state.image;var uploadTask=storage.ref(\"images/\".concat(image.name)).put(image);uploadTask.on('state_changed',function(snapshot){_this.setState({loading:true});},function(error){console.log(error);},function(){storage.ref('images').child(image.name).getDownloadURL().then(function(url){console.log(url);_this.setState({loading:false,url:url});}).then(function(){var _this$state=_this.state,url=_this$state.url,caption=_this$state.caption;var _this$props=_this.props,userid=_this$props.userid,back=_this$props.back;_this.props.createPost({user_id:userid,picture:url,likes:0,caption:caption});_this.setState({url:\"\",caption:\"\"});back();});});//  this.props.submitPost(this.state.caption)\n//[funcName].on(progress, error, complete) these are the task for the arguments that '.on()' takes\n};_this.handleTextChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};return _this;}_createClass(NewPostCard,[{key:\"render\",value:function render(){var _this2=this;console.log(\"NewPost Card props:\",this.props,\"New card State\",this.state);var url=this.state.url;var _this$props2=this.props,handleNewPost=_this$props2.handleNewPost,state=_this$props2.state,submitPost=_this$props2.submitPost,userId=_this$props2.userId;return React.createElement(React.Fragment,null,React.createElement(\"br\",null),this.state.loading?React.createElement(Loader,null):React.createElement(\"p\",{className:\"new-post-heading\"},\"Make New Post\"),React.createElement(\"div\",{className:\"the-card\"},React.createElement(\"input\",{type:\"file\",onChange:this.selectedFileHander,style:{display:\"none\"},ref:function ref(fileInput){return _this2.fileInput=fileInput;}}),React.createElement(\"div\",{className:\"img-box\",onClick:function onClick(){return _this2.fileInput.click();}},React.createElement(\"img\",{src:url?\"\".concat(url):require(\"../img/pic_placeholder.png\"),style:{width:\"286px\",height:\"180px\"}})),React.createElement(\"div\",null,React.createElement(\"textarea\",{className:\"post-text-area\",rows:\"5\",cols:\"30\",placeholder:\"#litty #\\uD83D\\uDD25 last night was mad trill\",style:{color:\"light-blue\"},name:\"caption\",value:this.state.caption,onChange:this.handleTextChange}),React.createElement(\"span\",null)),React.createElement(\"span\",{onClick:this.handleSubmit,id:\"post-submit-plus\"},\"\\u271A\")));}}]);return NewPostCard;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{userid:state.users.id};};export default connect(mapStateToProps,{createPost:createPost})(NewPostCard);","map":{"version":3,"sources":["/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/components/NewPostCard.js"],"names":["React","storage","Loader","connect","createPost","NewPostCard","state","image","url","caption","loading","selectedFileHander","e","target","files","setState","handleSubmit","uploadTask","ref","name","put","on","snapshot","error","console","log","child","getDownloadURL","then","props","userid","back","user_id","picture","likes","handleTextChange","value","handleNewPost","submitPost","userId","display","fileInput","click","require","width","height","color","Component","mapStateToProps","users","id"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport '../css/newPostCard.css';\nimport { storage } from '../firebase/index';\nimport Loader from '../components/loader';\nimport { connect } from 'react-redux';\nimport { createPost } from '../redux/actions/PostActions';\n\n\n\n\n\n//  SET UP FETCH POST FOR NEW POST AND CREATE MIGRATTION FOR CAPTION FOR POST AND SET UP TO GO BACK THE HOME PAGE AFTER POST IS FINISHED POSTING\n\nclass NewPostCard extends React.Component {\n\n  state = {\n    image: null,\n    url: \"\",\n    caption: \"\",\n    loading: false\n  }\n\n  selectedFileHander = (e) => {\n    if (e.target.files[0]) { this.setState({ image: e.target.files[0] }) };\n\n  }\n  handleSubmit = () => {\n    const { image } = this.state;\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n\n    uploadTask.on('state_changed', (snapshot) => {\n      this.setState({ loading: true })\n    },\n      (error) => {\n        console.log(error);\n\n      },\n      () => {\n        storage.ref('images').child(image.name).getDownloadURL().then(url => {\n          console.log(url)\n          this.setState({ loading: false, url })\n\n        }).then(()=> {\n         \n          const {url, caption} =this.state\n          const { userid, back } = this.props\n          this.props.createPost({user_id: userid ,picture:url, likes:0, caption: caption})\n          this.setState( {url:\"\", caption:\"\" })\n          back()\n        }\n         )\n      })\n\n    //  this.props.submitPost(this.state.caption)\n    //[funcName].on(progress, error, complete) these are the task for the arguments that '.on()' takes\n  }\n  handleTextChange = e => {\n    this.setState({ [e.target.name]: e.target.value })\n  }\n  render() {\n    console.log(\"NewPost Card props:\", this.props, \"New card State\", this.state);\n    const { url } = this.state\n    const { handleNewPost, state, submitPost, userId } = this.props;\n    return (\n      <><br />{this.state.loading ? <Loader /> : <p className=\"new-post-heading\">Make New Post</p>}\n        <div className=\"the-card\">\n\n          <input type=\"file\" onChange={this.selectedFileHander} style={{ display: \"none\" }} ref={fileInput => this.fileInput = fileInput} />\n          <div className=\"img-box\" onClick={() => this.fileInput.click()}>\n\n            <img src={url ? `${url}` : require(\"../img/pic_placeholder.png\")} style={{width:\"286px\", height:\"180px\"}} />\n          </div>\n\n          <div>\n            <textarea className=\"post-text-area\" rows=\"5\" cols=\"30\" placeholder=\"#litty #ðŸ”¥ last night was mad trill\" style={{ color: \"light-blue\" }} name=\"caption\" value={this.state.caption} onChange={this.handleTextChange}></textarea>\n\n            <span></span>\n          </div>\n          <span onClick={this.handleSubmit} id=\"post-submit-plus\">\n            âœš\n          </span>\n\n\n        </div>\n      </>\n    );\n  }\n}\nconst mapStateToProps = state =>{\n  return {\n    userid: state.users.id,\n  }\n}\nexport default  connect(mapStateToProps, { createPost })(NewPostCard);\n"]},"metadata":{},"sourceType":"module"}