{"ast":null,"code":"var _jsxFileName = \"/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/Profile.js\";\nimport React, { Component } from \"react\";\nimport { Navbar, Button, Card } from \"react-bootstrap\";\nimport PostCard from \"./components/PostCard\";\nimport Loader from './components/loader';\nimport { connect } from 'react-redux';\nimport { getPost, changeLike, deletePost, editCaption } from './redux/actions/PostActions';\nimport { deleteUser, editUser } from './redux/actions/UserActions';\nimport './css/Profile.css';\nimport { storage } from './firebase/index';\nimport placepic from './img/placeHolder.png';\nimport ProfilePostCard from './components/ProfilePostCard'; // editCaption } from './redux/actions/PostActions';\n\nclass Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      promiseReturned: false,\n      likedPosts: [],\n      show_x: false,\n      showEditCaptionField: false,\n      comment: \"\",\n      postToComment: null,\n      postToDelete: null,\n      deleteAccountRequested: null,\n      edit: false,\n      file: \"\",\n      username: \"\" || this.props.user,\n      picture: \"\" || this.props.pic,\n      email: \"\" || this.props.email,\n      state: \"\" || this.props.state,\n      city: \"\" || this.props.city,\n      bio: \"\" || this.props.bio,\n      zip: \"\" || this.props.zip,\n      dotsClicked: false,\n      editCaption: false,\n      captionId: null\n    };\n\n    this.handleLike = (id, likes) => {\n      const likedPosts = this.state.likedPosts;\n      const changeLike = this.props.changeLike;\n\n      if (likedPosts.includes(id)) {\n        changeLike(id, likes, '');\n        const newArr = likedPosts.filter(pId => pId !== id);\n        this.setState({\n          likedPosts: newArr\n        });\n      } else {\n        changeLike(id, likes, 'add');\n        const newArr = [...this.state.likedPosts, id];\n        this.setState({\n          likedPosts: newArr\n        });\n      }\n    };\n\n    this.editCapInput = cap => {\n      return React.createElement(\"input\", {\n        type: \"text\",\n        value: this.props.comment,\n        onChange: this.props.handleComment,\n        placeholder: ` ${cap}`,\n        id: \"edit-caption-input\",\n        name: \"comment\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      });\n    };\n\n    this.postCard = () => {\n      const _this$state = this.state,\n            comment = _this$state.comment,\n            edit = _this$state.edit,\n            show_x = _this$state.show_x,\n            postToComment = _this$state.postToComment,\n            postToDelete = _this$state.postToDelete,\n            editCaption = _this$state.editCaption,\n            captionId = _this$state.captionId,\n            showEditCaptionField = _this$state.showEditCaptionField;\n      const _this$props = this.props,\n            post = _this$props.post,\n            user = _this$props.user,\n            id = _this$props.id,\n            pic = _this$props.pic,\n            name = _this$props.name;\n      const pathname = this.props.history.location.pathname;\n      const myPost = post.filter(p => p.user_id == id);\n      return myPost.map(p => React.createElement(ProfilePostCard, {\n        post: p,\n        user: user,\n        name: name,\n        pic: pic,\n        id: id,\n        path: pathname,\n        post2Comment: this.postToCommentOn,\n        postCommId: postToComment,\n        handleComment: this.handleComment,\n        comment: comment,\n        handleLike: this.handleLike,\n        handleEdit: this.handleEdit,\n        handleCapSubmit: this.handleCaptionSubmit,\n        likedPosts: this.state.likedPosts,\n        show_x: show_x,\n        setId: this.setIdForPostToBeDeleted,\n        activate_Delete: this.showDelete_x,\n        postToDelete: postToDelete,\n        deletePost: this.deletePost,\n        needEditCaption: this.needEditCaption,\n        editCaption: editCaption,\n        capId: captionId,\n        showEditField: showEditCaptionField,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }));\n    };\n\n    this.postToCommentOn = id => {\n      this.setState({\n        postToComment: id\n      });\n    };\n\n    this.handleComment = (e, id) => {\n      this.postToCommentOn(id);\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.preDelete = () => {\n      this.setState({\n        deleteAccountRequested: true\n      });\n    };\n\n    this.deleteProfile = id => {\n      localStorage.clear();\n      const _this$props2 = this.props,\n            deleteUser = _this$props2.deleteUser,\n            history = _this$props2.history;\n      this.setState({\n        deleteAccountRequested: false\n      });\n      deleteUser(id).then(() => {\n        localStorage.clear();\n        history.push('/');\n      });\n    };\n\n    this.showDelete_x = () => {\n      this.setState({\n        show_x: !this.state.show_x\n      });\n    };\n\n    this.setIdForPostToBeDeleted = id => {\n      this.setState({\n        postToDelete: id\n      });\n      this.showDelete_x();\n    };\n\n    this.showHideEditCaption = () => {};\n\n    this.resetDeleting = () => {\n      this.setState({\n        postToDelete: null,\n        show_x: false\n      });\n    };\n\n    this.confirmDelete = () => {\n      const _this$props3 = this.props,\n            id = _this$props3.id,\n            pic = _this$props3.pic;\n      return React.createElement(\"div\", {\n        className: \"confirm-delete-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Are you sure you want to delete your account?\"), pic && React.createElement(React.Fragment, null, React.createElement(\"img\", {\n        src: pic,\n        className: \"pic-in-delete-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"yes-btn\",\n        onClick: () => this.deleteProfile(id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Yes\"), React.createElement(\"button\", {\n        className: \"no-btn\",\n        onClick: () => this.setState({\n          deleteAccountRequested: false\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"No\"));\n    };\n\n    this.needEdit = () => {\n      this.setState({\n        edit: !this.state.edit\n      });\n    };\n\n    this.needEditCaption = id => {\n      this.setState({\n        editCaption: !this.state.editCaption,\n        captionId: id\n      });\n    };\n\n    this.handleEdit = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleCaptionSubmit = id => {\n      this.props.editCaption(id, this.state.comment);\n      this.setState({\n        comment: \"\",\n        editCaption: false\n      });\n    };\n\n    this.selectedFileHander = e => {\n      const image = e.target.files[0];\n\n      if (image) {\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\n        uploadTask.on('state_changed', snapshot => {}, error => {\n          console.log(error);\n        }, () => {\n          storage.ref('images').child(image.name).getDownloadURL().then(url => {\n            this.setState({\n              picture: url\n            });\n          });\n        });\n      }\n\n      ;\n    };\n\n    this.submitEdit = e => {\n      e.preventDefault();\n      const _this$props4 = this.props,\n            id = _this$props4.id,\n            editUser = _this$props4.editUser;\n      const _this$state2 = this.state,\n            username = _this$state2.username,\n            picture = _this$state2.picture,\n            email = _this$state2.email,\n            state = _this$state2.state,\n            city = _this$state2.city,\n            bio = _this$state2.bio;\n      const info = {\n        username,\n        picture,\n        email,\n        state,\n        city,\n        bio\n      };\n      editUser(id, info).then(() => {\n        this.setState({\n          edit: false\n        });\n      });\n    };\n\n    this.editForm = () => {\n      const _this$props5 = this.props,\n            history = _this$props5.history,\n            pic = _this$props5.pic,\n            bio = _this$props5.bio,\n            state = _this$props5.state,\n            user = _this$props5.user,\n            city = _this$props5.city,\n            email = _this$props5.email,\n            zip = _this$props5.zip,\n            id = _this$props5.id;\n      return React.createElement(React.Fragment, null, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Edit Profile Details \"), React.createElement(\"img\", {\n        src: !!this.state.picture ? this.state.picture : pic,\n        className: \"profile-pic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        onClick: () => this.fileInput.click(),\n        className: \"update-pic-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"update pic\"), React.createElement(\"form\", {\n        className: \"edit-profile-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.username,\n        type: \"text\",\n        onChange: this.handleEdit,\n        name: \"username\",\n        placeholder: user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"email\",\n        value: this.state.email,\n        onChange: this.handleEdit,\n        placeholder: email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"city\",\n        value: this.state.city,\n        onChange: this.handleEdit,\n        placeholder: `City: ex.  ${city}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"state\",\n        value: this.state.state,\n        onChange: this.handleEdit,\n        placeholder: `State: ex. ${state}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"zip\",\n        value: this.state.zip,\n        onChange: this.handleEdit,\n        placeholder: `zip: ex. ${zip ? zip : '12345'}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"textarea\", {\n        rows: \"12\",\n        cols: \"20\",\n        value: this.state.bio,\n        type: \"text\",\n        onChange: this.handleEdit,\n        name: \"bio\",\n        placeholder: bio,\n        className: \"edit-bio\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"file\",\n        ref: fileInput => this.fileInput = fileInput,\n        onChange: e => this.selectedFileHander(e),\n        style: {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        onClick: this.submitEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"cancel-in-edit-btn\",\n        onClick: () => {\n          this.setState({\n            edit: false\n          });\n          this.state.dotsClicked && this.setState({\n            dotsClicked: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Cancel\")));\n    };\n\n    this.deletePost = id => {\n      this.props.deletePost(id);\n    };\n\n    this.showLogoutEditDelete = () => {\n      this.setState({\n        dotsClicked: !this.state.dotsClicked\n      });\n    };\n  }\n\n  componentDidMount() {\n    !localStorage.token && this.props.history.push('/');\n    const _this$props6 = this.props,\n          getPost = _this$props6.getPost,\n          post = _this$props6.post;\n    getPost();\n    post && this.setState({\n      promiseReturned: true\n    });\n  }\n\n  render() {\n    const _this$props7 = this.props,\n          history = _this$props7.history,\n          pic = _this$props7.pic,\n          city = _this$props7.city,\n          bio = _this$props7.bio,\n          state = _this$props7.state,\n          requested = _this$props7.requested;\n    const _this$state3 = this.state,\n          deleteAccountRequested = _this$state3.deleteAccountRequested,\n          edit = _this$state3.edit,\n          dotsClicked = _this$state3.dotsClicked;\n    const dlt = deleteAccountRequested;\n    const user = localStorage.currentUser;\n    console.log(\"Edit caption:\", this.state.comment);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: dlt ? \" parent delete-requested\" : \"parent\",\n      onClick: e => {\n        if ((e.target.className === \"parent delete-requested\" || \"parent\" || \"profile-off-heart\" || \"delete-post-x\") && e.target.className !== \"dots-edit-profile\") {\n          this.setState({\n            dotsClicked: false\n          });\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"user-gram\",\n      onClick: () => history.push('/home'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, user, \"'taGram \"), React.createElement(\"span\", {\n      className: \"camera\",\n      id: this.state.id,\n      onClick: () => history.push('/home'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \" \\uD83D\\uDCF8 \"), dotsClicked ? React.createElement(\"ul\", {\n      className: \"profile-edit-delete-logout-ul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      onClick: () => this.needEdit(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"Edit Profile\"), React.createElement(\"li\", {\n      onClick: this.preDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Delete Profile\"), React.createElement(\"li\", {\n      onClick: () => {\n        localStorage.clear();\n        this.props.history.push('/');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"Logout\"), React.createElement(\"li\", {\n      onClick: () => {\n        this.setState({\n          edit: false,\n          dotsClicked: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"Cancel\")) : React.createElement(\"span\", {\n      className: \"dots-edit-profile\",\n      onClick: () => this.setState({\n        dotsClicked: !this.state.dotsClicked\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \". . .\")), React.createElement(\"div\", {\n      className: \"profile-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, !edit && React.createElement(React.Fragment, null, \" \", React.createElement(\"h3\", {\n      className: \"hi-im\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"Hi I'm \", user)), React.createElement(\"img\", {\n      src: pic,\n      className: \"profile-pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"bio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, \"Bio:\"), \" \", bio), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      className: \"location\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \"Location:\")), React.createElement(\"p\", {\n      className: \"city-state\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }), \" \", city, \", \", state))), edit && this.editForm()), React.createElement(\"div\", {\n      className: \"post-cards-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, this.state.promiseReturned && this.postCard()), React.createElement(\"div\", {\n      className: \"non-friends\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, dlt && requested && React.createElement(Loader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }), dlt && this.confirmDelete()));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    post: state.post.posts,\n    user: state.users.username,\n    pic: state.users.picture,\n    id: state.users.id,\n    bio: state.users.bio,\n    email: state.users.email,\n    city: state.users.city,\n    state: state.users.state,\n    zip: state.users.zip,\n    users: state.users.all,\n    name: state.users.usersObj,\n    requested: state.users.requested\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getPost,\n  changeLike,\n  deleteUser,\n  editUser,\n  deletePost,\n  editCaption\n})(Profile);\n{\n  /* <Col xs={6} md={4}>\n      <Image src=\"holder.js/171x180\" roundedCircle />\n    </Col> from https://react-bootstrap.github.io/components/images/ */\n}","map":{"version":3,"sources":["/Users/owner/Desktop/finalprojects/MyStagram/MyFront-end/src/Profile.js"],"names":["React","Component","Navbar","Button","Card","PostCard","Loader","connect","getPost","changeLike","deletePost","editCaption","deleteUser","editUser","storage","placepic","ProfilePostCard","Profile","state","promiseReturned","likedPosts","show_x","showEditCaptionField","comment","postToComment","postToDelete","deleteAccountRequested","edit","file","username","props","user","picture","pic","email","city","bio","zip","dotsClicked","captionId","handleLike","id","likes","includes","newArr","filter","pId","setState","editCapInput","cap","handleComment","postCard","post","name","pathname","history","location","myPost","p","user_id","map","postToCommentOn","handleEdit","handleCaptionSubmit","setIdForPostToBeDeleted","showDelete_x","needEditCaption","e","target","value","preDelete","deleteProfile","localStorage","clear","then","push","showHideEditCaption","resetDeleting","confirmDelete","needEdit","selectedFileHander","image","files","uploadTask","ref","put","on","snapshot","error","console","log","child","getDownloadURL","url","submitEdit","preventDefault","info","editForm","fileInput","click","display","showLogoutEditDelete","componentDidMount","token","render","requested","dlt","currentUser","className","mapStateToProps","posts","users","all","usersObj"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Navbar, Button, Card } from \"react-bootstrap\";\nimport PostCard from \"./components/PostCard\";\nimport Loader from './components/loader';\nimport { connect } from 'react-redux';\nimport { getPost, changeLike, deletePost, editCaption } from './redux/actions/PostActions';\nimport { deleteUser, editUser } from './redux/actions/UserActions'\nimport './css/Profile.css';\nimport { storage } from './firebase/index';\nimport placepic from './img/placeHolder.png';\nimport ProfilePostCard from './components/ProfilePostCard';\n\n\n// editCaption } from './redux/actions/PostActions';\nclass Profile extends Component {\n\n  state = {\n    promiseReturned: false,\n    likedPosts: [],\n    show_x: false,\n    showEditCaptionField: false,\n    comment: \"\",\n    postToComment: null,\n    postToDelete: null,\n    deleteAccountRequested: null,\n    edit: false,\n    file: \"\",\n    username: \"\" || this.props.user,\n    picture: \"\" || this.props.pic,\n    email: \"\" || this.props.email,\n    state: \"\" || this.props.state,\n    city: \"\" || this.props.city,\n    bio: \"\" || this.props.bio,\n    zip: \"\" || this.props.zip,\n    dotsClicked: false,\n    editCaption: false,\n    captionId: null\n\n\n  }\n  componentDidMount() {\n\n    !localStorage.token && this.props.history.push('/')\n    const { getPost, post } = this.props\n    getPost()\n\n    post && this.setState({ promiseReturned: true })\n\n  }\n\n  handleLike = (id, likes) => {\n    const { likedPosts } = this.state\n    const { changeLike } = this.props\n    if (likedPosts.includes(id)) {\n      changeLike(id, likes, '')\n      const newArr = likedPosts.filter(pId => pId !== id)\n      this.setState({ likedPosts: newArr })\n\n    }\n    else {\n      changeLike(id, likes, 'add')\n      const newArr = [...this.state.likedPosts, id]\n      this.setState({ likedPosts: newArr })\n    }\n\n  }\n  editCapInput = (cap) => {\n\n    return <input type='text' value={this.props.comment} onChange={this.props.handleComment} placeholder={` ${cap}`} id=\"edit-caption-input\" name=\"comment\" />\n  }\n  postCard = () => {\n    const { comment, edit, show_x, postToComment, postToDelete, editCaption, captionId,showEditCaptionField } = this.state\n    const { post, user, id, pic, name } = this.props\n\n    const { pathname } = this.props.history.location\n\n    const myPost = post.filter(p => p.user_id == id)\n\n    return myPost.map(p => <ProfilePostCard\n      post={p}\n      user={user}\n      name={name}\n      pic={pic}\n      id={id}\n      path={pathname}\n      post2Comment={this.postToCommentOn}\n      postCommId={postToComment}\n      handleComment={this.handleComment}\n      comment={comment}\n      handleLike={this.handleLike}\n      handleEdit={this.handleEdit}\n      handleCapSubmit={this.handleCaptionSubmit}\n      likedPosts={this.state.likedPosts}\n      show_x={show_x}\n      setId={this.setIdForPostToBeDeleted}\n      activate_Delete={this.showDelete_x}\n      postToDelete={postToDelete}\n      deletePost={this.deletePost}\n      needEditCaption={this.needEditCaption}\n      editCaption={editCaption}\n      capId={captionId}\n      showEditField={showEditCaptionField}\n\n    />)\n\n\n  };\n  postToCommentOn = (id) => {\n    this.setState({ postToComment: id })\n  }\n  handleComment = (e, id) => {\n    this.postToCommentOn(id)\n    this.setState({ [e.target.name]: e.target.value })\n  }\n  preDelete = () => {\n    this.setState({ deleteAccountRequested: true })\n  }\n  deleteProfile = (id) => {\n    localStorage.clear()\n    const { deleteUser, history } = this.props\n    this.setState({ deleteAccountRequested: false })\n    deleteUser(id)\n      .then(() => {\n        localStorage.clear()\n        history.push('/')\n      }\n      )\n  }\n  showDelete_x = () => {\n    this.setState({ show_x: !this.state.show_x })\n  }\n  setIdForPostToBeDeleted = (id) => {\n    this.setState({ postToDelete: id })\n    this.showDelete_x()\n    \n\n  }\n  showHideEditCaption=()=>{\n\n  }\n  resetDeleting = () => {\n    this.setState({ postToDelete: null, show_x: false })\n  }\n  confirmDelete = () => {\n    const { id, pic } = this.props\n    return <div className=\"confirm-delete-div\">\n      <p>Are you sure you want to delete your account?</p>\n      {pic && <><img src={pic} className=\"pic-in-delete-option\" /><br /></>}\n      <button className=\"yes-btn\" onClick={() => this.deleteProfile(id)}>Yes</button>\n      <button className=\"no-btn\" onClick={() => this.setState({ deleteAccountRequested: false })}>No</button>\n    </div>\n  }\n  needEdit = () => {\n    this.setState({ edit: !this.state.edit })\n  }\n  needEditCaption = (id) => {\n    this.setState({ editCaption: !this.state.editCaption, captionId: id})\n  }\n\n  handleEdit = (e) => {\n    this.setState({ [e.target.name]: e.target.value })\n  }\n\n  handleCaptionSubmit=(id)=>{\n    this.props.editCaption(id, this.state.comment)\n    this.setState({ comment: \"\", editCaption: false })\n\n  }\n\n  selectedFileHander = (e) => {\n    const image = e.target.files[0]\n    if (image) {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n\n      uploadTask.on('state_changed', (snapshot) => {\n\n      },\n        (error) => {\n          console.log(error);\n\n        },\n        () => {\n          storage.ref('images').child(image.name).getDownloadURL().then(url => {\n            this.setState({ picture: url })\n\n          })\n        })\n\n    };\n\n  }\n  submitEdit = (e) => {\n    e.preventDefault()\n    const { id, editUser } = this.props\n    const { username, picture, email, state, city, bio } = this.state\n    const info = { username, picture, email, state, city, bio }\n    editUser(id, info).then(() => {\n      this.setState({ edit: false })\n    })\n\n  }\n\n  editForm = () => {\n    const { history, pic, bio, state, user, city, email, zip, id } = this.props;\n\n\n    return (<>\n      <p>Edit Profile Details </p>\n      <img src={!!this.state.picture ? this.state.picture : pic} className=\"profile-pic\" />\n      <div onClick={() => this.fileInput.click()} className=\"update-pic-div\" >\n        update pic\n          </div>\n      <form className=\"edit-profile-form\">\n        <input value={this.state.username} type=\"text\" onChange={this.handleEdit} name=\"username\" placeholder={user} />\n\n        <input name=\"email\" value={this.state.email} onChange={this.handleEdit} placeholder={email} />\n        <input name=\"city\" value={this.state.city} onChange={this.handleEdit} placeholder={`City: ex.  ${city}`} />\n        <input type=\"text\" name=\"state\" value={this.state.state} onChange={this.handleEdit} placeholder={`State: ex. ${state}`} />\n        <input name=\"zip\" value={this.state.zip} onChange={this.handleEdit} placeholder={`zip: ex. ${zip ? zip : '12345'}`} />\n        <br />\n        <textarea rows=\"12\" cols=\"20\" value={this.state.bio} type=\"text\" onChange={this.handleEdit} name=\"bio\" placeholder={bio} className=\"edit-bio\" />\n\n        <input type=\"file\" ref={fileInput => this.fileInput = fileInput} onChange={(e) => this.selectedFileHander(e)} style={{ display: \"none\" }} />\n\n\n\n        <input type=\"submit\" onClick={this.submitEdit} />\n        <br />\n        <button className=\"cancel-in-edit-btn\" onClick={() => {\n          this.setState({ edit: false })\n          this.state.dotsClicked && this.setState({ dotsClicked: false })\n        }\n        } >Cancel</button>\n      </form>\n    </>\n    )\n  }\n\n  deletePost = (id) => {\n    this.props.deletePost(id)\n  }\n\n  showLogoutEditDelete = () => {\n    this.setState({ dotsClicked: !this.state.dotsClicked })\n  }\n  render() {\n\n    const { history, pic, city, bio, state, requested } = this.props;\n    const { deleteAccountRequested, edit, dotsClicked } = this.state\n    const dlt = deleteAccountRequested\n    const user = localStorage.currentUser\n    console.log(\"Edit caption:\",this.state.comment)\n\n\n\n\n    \n    return (\n      <div>\n\n        <div class={dlt ? \" parent delete-requested\" : \"parent\"} onClick={(e) => {\n          if ((e.target.className === \"parent delete-requested\" || \"parent\" || \"profile-off-heart\" || \"delete-post-x\") && e.target.className !== \"dots-edit-profile\") {\n            this.setState({ dotsClicked: false })\n          }\n        }\n        }>\n\n          <div className=\"nav-div\">\n            <span className=\"user-gram\" onClick={() => history.push('/home')}>{user}'taGram </span>\n            <span className=\"camera\" id={this.state.id} onClick={() => history.push('/home')}> 📸 </span>\n            {dotsClicked ?\n              <ul className=\"profile-edit-delete-logout-ul\">\n                <li onClick={() => this.needEdit()}>Edit Profile</li>\n                <li onClick={this.preDelete}>Delete Profile</li>\n                <li onClick={() => {\n                  localStorage.clear()\n                  this.props.history.push('/')\n\n                }}>Logout</li>\n                <li onClick={() => {\n                  this.setState({ edit: false, dotsClicked: false })\n                }}>Cancel</li>\n              </ul>\n              : <span className=\"dots-edit-profile\" onClick={() => this.setState({ dotsClicked: !this.state.dotsClicked })}>. . .</span>}\n\n          </div>\n\n          <div className=\"profile-section\">\n            {!edit &&\n              <> <h3 className=\"hi-im\"><strong>Hi I'm {user}</strong></h3>\n                <img src={pic} className=\"profile-pic\" />\n\n\n                <div>\n                  <p className=\"bio\"><strong>Bio:</strong> {bio}</p>\n                  <p><strong className=\"location\">Location:</strong></p>\n                  <p className=\"city-state\"><strong></strong> {city}, {state}</p>\n\n\n\n                </div>\n              </>\n            }\n            {edit && this.editForm()}\n\n          </div>\n\n\n\n          <div className=\"post-cards-div\">\n\n\n            {/* <ProfilePostCard  post={post} user={user} /> */}\n            {this.state.promiseReturned && this.postCard()}\n          </div>\n\n          <div className=\"non-friends\">\n\n          </div>\n\n        </div>\n\n\n        <div>\n          {dlt && requested && <Loader />}\n\n          {dlt && this.confirmDelete()}\n\n        </div>\n      </div>\n\n\n\n\n    );\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    post: state.post.posts,\n    user: state.users.username,\n    pic: state.users.picture,\n    id: state.users.id,\n    bio: state.users.bio,\n    email: state.users.email,\n    city: state.users.city,\n    state: state.users.state,\n    zip: state.users.zip,\n    users: state.users.all,\n    name: state.users.usersObj,\n    requested: state.users.requested\n  }\n}\nexport default connect(mapStateToProps, { getPost, changeLike, deleteUser, editUser, deletePost, editCaption })(Profile)\n{\n  /* <Col xs={6} md={4}>\n      <Image src=\"holder.js/171x180\" roundedCircle />\n    </Col> from https://react-bootstrap.github.io/components/images/ */\n}\n"]},"metadata":{},"sourceType":"module"}